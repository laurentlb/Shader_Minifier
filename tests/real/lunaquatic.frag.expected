/* File generated with Shader Minifier 1.1.6
 * http://www.ctrl-alt-test.fr
 */
#ifndef LUNAQUATIC_FRAG_EXPECTED_
# define LUNAQUATIC_FRAG_EXPECTED_
# define VAR_RESOLUTION "z"
# define VAR_TIME "m"

const char *lunaquatic_frag =
 "#extension GL_EXT_gpu_shader4:enable\n"
 "vec4 v;"
 "uniform vec2 z;"
 "uniform float m;"
 "vec4 f;"
 "vec3 y,s,x,i;"
 "float r,w,c,n=.0001;"
 "float e(float v)"
 "{"
   "return clamp(v,0.,1.);"
 "}"
 "float e(float v,float x,float z)"
 "{"
   "return(v-x)/(z-x);"
 "}"
 "vec3 e(vec3 v,float x)"
 "{"
   "return vec3(cos(x)*v.x-sin(x)*v.z,v.y,sin(x)*v.x+cos(x)*v.z);"
 "}"
 "vec3 t(vec3 v,float x)"
 "{"
   "return vec3(v.x,v.y*cos(x)-v.z*sin(x),v.y*sin(x)+v.z*cos(x));"
 "}"
 "float t(vec2 v)"
 "{"
   "int x=int(v.x*40.+v.y*6400.);"
   "x=x<<13^x;"
   "return 1.-float(x*(x*x*15731+789221)+1376312589&2147483647)/1073741824.;"
 "}"
 "float p(float z)"
 "{"
   "return z*.5+.5;"
 "}"
 "float p(float x,float z,float y)"
 "{"
   "return pow((p(sin(c*2.*(x+z+v.z*y)))+p(sin(c*(z-x-v.z*y)))+p(sin(c*(z+v.z*y)))+p(sin(c*3.*(x-v.z*y))))*.3,2.);"
 "}"
 "float h(vec2 v)"
 "{"
   "v=mod(v,1000.);"
   "vec2 z=fract(v);"
   "v-=z;"
   "vec2 x=z*z*(3.-2.*z);"
   "return mix(mix(t(v+vec2(0.)),t(v+vec2(1.,0.)),x.x),mix(t(v+vec2(0.,1.)),t(v+vec2(1.)),x.x),x.y);"
 "}"
 "float d(vec2 z)"
 "{"
   "float s=v.z-w,y=mix(1.,max(0.,f.w-f.y),1.-(s>0.&&length(z-f.xz)<s?1.:0.))/pow(1./max(0.,1.-length(f.xz-z)*.8),2.);"
   "z+=length(z-x.xy);"
   "z*=min(length(z-x.xy)*5.,4.);"
   "return p(z.x+v.z*.75,z.y*.5,.3)*.006+p(z.x*.1+v.z*.2,z.y*.1,.02)*.125-.15-y*2.;"
 "}"
 "vec3 a(vec3 v)"
 "{"
   "return normalize(vec3(p(v.x*160.-12.*cos(10.*v.z),v.z*140.,4.),8.,p(v.z*160.-12.*sin(10.*v.x),v.x*140.,4.))*2.-1.);"
 "}"
 "int a(vec3 v,vec3 x,float z,out float y)"
 "{"
   "float i,f,c=0.;"
   "for(float m=.1;m<z;m+=c)"
     "{"
       "v+=x*c;"
       "y=d(v.xz);"
       "if(v.y<=y)"
         "return y=m-c+c*(i-f)/(v.y-y+i-f),1;"
       "i=y;"
       "f=v.y;"
       "c=.002+m/(40.*clamp(x.y+1.,0.,1.));"
     "}"
   "return 0;"
 "}"
 "vec3 l(vec3 v)"
 "{"
   "return p(h(abs(v.xy*v.z+v.y*2.)))*vec3(.15)+p(h(1.5*abs(v.xy*v.z+v.y+10.)))*vec3(.15)+p(h(2.5*abs(v.xy*v.z+v.y+20.)))*vec3(.15);"
 "}"
 "vec4 a(vec3 x,vec3 z)"
 "{"
   "vec4 f=vec4(0.);"
   "vec3 s=vec3(70.,20.,100.);"
   "float i=dot(z,normalize(s-x))-.95;"
   "if(i>0.)"
     "{"
       "i=length(s-x)-i*800.;"
       "vec3 w=x+z*i,n=normalize(s-w);"
       "vec2 m=.5+.5*vec2(atan(n.z,n.x),acos(n.y))/c*vec2(5.,50.);"
       "f.xyz=max(0.,.2+dot(normalize(w-y),n))*(p(m.x*.5+v.z*.1,m.y*.5,0.)+.5)*.15*vec3(1.,0.,1.);"
       "f.w=1.;"
     "}"
   "else"
     " i=r*99.;"
   "vec3 n=vec3(-.96,.96,-.2);"
   "float m=dot(n,s-x)/dot(n,z);"
   "if(m>0.&&m<i)"
     "{"
       "float w=length(s-(x+z*m));"
       "if(w>52.&&w<80.)"
         "f.xyz=mix(f.xyz,vec3(.8,.64,.4),m/200.*p(sin((w-50.)/30.*h(vec2(w,3.)))));"
       "f.w=f.w<1.?3.*length(f):f.w;"
     "}"
   "return vec4(max(vec3(0.),f.xyz*.3)*clamp(dot(z,vec3(0.,1.,0.))*8.,0.,1.),f.w);"
 "}"
 "vec3 a(vec3 x,vec3 z,int y)"
 "{"
   "vec3 i=max(vec3(0.),(max(vec3(0.),pow(dot(s,z),6.))*.7-z.y)*mix(vec3(1.,.5,0.),vec3(1.),min(1.,s.y*1.5))+s.y*3.);"
   "float f=atan(z.x,z.z),w=acos(z.y/length(z)),m=smoothstep(0.,.5,p(.5*h(300.*vec2(f,w)))+p(.75*h(500.*vec2(f,w)))-1.25)*e(1.-s.y*5.);"
   "if(y>0)"
     "{"
       "vec4 c=a(x,z);"
       "i+=m*e(1.-c.w)+c.xyz;"
     "}"
   "z.xy+=x.xy*n;"
   "i+=(l(normalize(z+vec3(sin(v.z*.1),0.,cos(v.z*.1))*.1)*3.)+l(normalize(z+vec3(sin(v.z*.1),0.,cos(v.z*.1))*.2)*5.)*.1+l(normalize(z+vec3(sin(v.z*.1),0.,cos(v.z*.1))*.4)*7.)*.1-l(normalize(z+vec3(sin(v.z*.2),0.,0)*.5))*1.5)*e(z.y+.5);"
   "return i;"
 "}"
 "float o(vec3 x)"
 "{"
   "float z=v.z>80.&&v.z<112.?1.:0.;"
   "x=t(e(t(e(x-f.xyz,3.*v.z),3.*v.z),z*sin(3.*v.z+3.*x.y)),z*sin(3.*v.z+3.*x.x));"
   "x*=4.+10.*max(0.,v.z-w);"
   "return-.4+x.x*x.x*x.x*x.x*x.x*x.x*x.x*x.x+x.y*x.y*x.y*x.y*x.y*x.y*x.y*x.y+x.z*x.z*x.z*x.z*x.z*x.z*x.z*x.z;"
 "}"
 "float a(vec3 v,vec3 x,float z,float s,float y)"
 "{"
   "float i,f,m,n=(s-z)/y;"
   "for(float w=z;w<s;w+=n)"
     "{"
       "vec3 c=v+w*x;"
       "float d=o(c);"
       "if(d<=0.)"
         "{"
           "for(int e=0;e<9;e++)"
             "{"
               "m=(i+w)/2.;"
               "if(o(v+m*x)<0.)"
                 "w=m;"
               "else"
                 " i=m;"
             "}"
           "return m;"
         "}"
       "i=w;"
       "f=d;"
     "}"
   "return r;"
 "}"
 "void d(vec2 z,vec3 x,inout vec3 y)"
 "{"
   "float s=length(z-f.xz),n=v.z-w;"
   "if(n>0.&&s<n)"
     "{"
       "float i=n*.9;"
       "if(s<n-(n-i))"
         "{"
           "float m=e((s-i)/(n-(n-i)*2.-i));"
           "y*=1.-m*1.5;"
           "y+=(1.-m*.8)*pow(p(x.x)+p(x.y),2.*p(h(.4*v.z+z*20.))*p(h(10.+z*5.))+1.)*vec3(1.5,.75,.5);"
         "}"
       "if(s>n-(n-i)*2.)"
         "y+=cos((s-i)/(n-i)*c*.5)*vec3(1.5,.75,.5);"
     "}"
 "}"
 "vec3 d(vec3 v,vec3 x)"
 "{"
   "float z=(.1-v.y)/x.y,y=200.;"
   "vec3 i=a(v,x,1);"
   "if(x.y<-.01&&a(v+x*z,x,y,y)>0)"
     "{"
       "y+=z;"
       "vec3 f=v+x*y,w=normalize(normalize(vec3(d(f.xz-vec2(n,0.))-d(f.xz+vec2(n,0.)),n*2.,d(f.xz-vec2(0.,n))-d(f.xz+vec2(0.,n))))+(a(f*.2)*1.5+a(f*.1))*max(0.,1.-y/r*7.));"
       "i=max(0.,dot(w,s)+pow(max(0.,dot(w,normalize(s-x))),2.))*a(f,reflect(x,w),1);"
       "d(f.xz,w,i);"
       "i=mix(i,a(v,x,0),e(y/r*1.6+e(dot(normalize(w+x*.2),x))));"
     "}"
   "return i;"
 "}"
 "void main()"
 "{"
   "r=9.;"
   "w=127.;"
   "c=3.1416;"
   "v.xy=-1.+2.*gl_FragCoord.xy/z.xy;"
   "v.z=m;"
   "i=normalize(vec3(v.xy-.5,1.));"
   "f=vec4(10.,p(sin(v.z+4.)),13.,0.);"
   "x=vec3(0.,.25,0.);"
   "float l=v.z;"
   "if(l<16.)"
     "l=e(l,0.,16.),l=1.-pow(1.-l,2.),y=vec3(-400.,100.-l*450.,1000.),l=(l-1.)*.7,i=t(i,-l);"
   "else"
     " if(l<32.)"
       "l=e(l,16.,32.),l=1.-pow(1.-l,2.),y=vec3(-400.,-350.+l*600.,1000.),x.y-=l*.1;"
     "else"
       " if(l<40.)"
         "y=vec3(-400.,250.,1000.),x.y-=.1;"
       "else"
         " if(l<64.)"
           "{"
             "int h=int((l-40.)/6.);"
             "if(h>=3)"
               "f.w=1.;"
             "y=vec3(-400.,min(250.,p(t(vec2(h,2)))*400.),1000.);"
             "x.xz+=vec2(.1,20.)*vec2(t(vec2(h,5.)),t(vec2(h,7.)));"
             "x=mix(x+vec3(.008)*abs(vec3(t(vec2(h,8.)),0.,t(vec2(h,10.)))),x+vec3(.75)*abs(vec3(t(vec2(h,11.)),0.,t(vec2(h,13.)))),l-40.-float(h));"
             "x.y=.2;"
             "i=e(i,t(vec2(h,14.))*c);"
           "}"
         "else"
           "{"
             "f.w=1.;"
             "y=vec3(-400.,p(sin(l+10.))*250.,1000.);"
             "float h=smoothstep(118.,120.,l);"
             "x.xz=f.xz+mix(vec2(sin(l*.6),cos(l*.6))*mix(sin(l*1.5+10.)+2.,2.,h),vec2(0.,2.+.75*(l-w)),smoothstep(-1.,1.,l-w));"
             "x.y=mix(p(sin(l*3.)*(1.-h))*.3,0.,smoothstep(-1.,1.,l-w))+.2;"
             "vec2 G=normalize(f.xz-x.xz);"
             "i=e(i,atan(G.y,G.x)-c/2.);"
           "}"
   "s=normalize(y-x);"
   "float h=length(x-f.xyz)-1.,G=f.w==1.?a(x,i,h,h+2.,99.):r;"
   "if(G<r)"
     "{"
       "x+=G*i;"
       "vec3 u=normalize(vec3(o(vec3(x.x-n,x.y,x.z))-o(vec3(x.x+n,x.y,x.z)),o(vec3(x.x,x.y-n,x.z))-o(vec3(x.x,x.y+n,x.z)),o(vec3(x.x,x.y,x.z-n))-o(vec3(x.x,x.y,x.z+n))));"
       "i=reflect(i,u);"
     "}"
   "gl_FragColor=vec4(d(x,i)*e(sin(v.z/150.*c)*10.),1.);"
 "}";

#endif // LUNAQUATIC_FRAG_EXPECTED_
