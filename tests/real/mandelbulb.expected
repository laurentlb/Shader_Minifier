/* File generated with 
 * http://www.ctrl-alt-test.fr
 */
#ifndef MANDELBULB_EXPECTED_
# define MANDELBULB_EXPECTED_

const char *mandelbulb_frag =
 "uniform vec2 resolution;"
 "uniform float time;"
 "bool f(vec4 v,vec3 f,vec3 y,out vec2 i)"
 "{"
   "vec3 x=f-v.xyz;"
   "float c=dot(x,y),e=dot(x,x)-v.w*v.w,o=c*c-e;"
   "if(o<0.)"
     "return false;"
   "float t=sqrt(o);"
   "i.x=-c-t;"
   "i.y=-c+t;"
   "return true;"
 "}"
 "const int e=7;"
 "const float y=100.;"
 "bool f(vec3 v,out float f,out vec4 o)"
 "{"
   "vec4 i=vec4(100);"
   "vec3 c=v;"
   "float x=dot(c,c);"
   "if(x>y)"
     "return f=.5*log(x)/pow(8.,0.),o=vec4(1),false;"
   "for(int t=1;t<e;t++)"
     "{"
       "\n#if 0\n"
       "float z=sqrt(dot(c,c)),s=acos(c.y/z),n=atan(c.x,c.z);"
       "z=pow(z,8.);"
       "s=s*8.;"
       "n=n*8.;"
       "c=v+z*vec3(sin(s)*sin(n),cos(s),sin(s)*cos(n));"
       "\n#else\n"
       "float d=c.x,m=d*d,p=m*m,l=c.y,r=l*l,a=c.z,w=a*a,g=w*w,u=m+w,q=inversesqrt(u*u*u*u*u*u*u),b=p+r*r+g-6.*r*w-6.*m*r+2.*w*m,F=m-r+w;"
       "c.x=v.x+64.*d*l*a*(m-w)*F*(p-6.*m*w+g)*b*q;"
       "c.y=v.y+-16.*r*u*F*F+b*b;"
       "c.z=v.z+-8.*l*F*(p*p-28.*p*m*w+70.*p*g-28.*m*w*g+g*g)*b*q;"
       "\n#endif\n"
       "x=dot(c,c);"
       "i=min(i,vec4(c.xyz*c.xyz,x));"
       "if(x>y)"
         "return o=i,f=.5*log(x)/pow(8.,float(t)),false;"
     "}"
   "o=i;"
   "f=0.;"
   "return true;"
 "}"
 "bool f(vec3 v,vec3 c,out float o,float y,out vec3 x,out vec4 t,float u)"
 "{"
   "vec4 i=vec4(0,0,0,1.25);"
   "vec2 e;"
   "if(!f(i,v,c,e))"
     "return false;"
   "if(e.y<.001)"
     "return false;"
   "if(e.x<.001)"
     "e.x=.001;"
   "if(e.y>y)"
     "e.y=y;"
   "float n;"
   "vec3 s;"
   "vec4 m;"
   "float w=1./sqrt(1.+u*u);"
   "for(float r=e.x;r<e.y;)"
     "{"
       "vec3 z=v+c*r;"
       "float d=clamp(.001*r*w,1e-6,.005),p=d*.1;"
       "vec4 q;"
       "float l;"
       "if(f(z,l,m))"
         "return o=r,x=normalize(s),t=m,true;"
       "float g;"
       "f(z+vec3(p,0,0),g,q);"
       "float a;"
       "f(z+vec3(0,p,0),a,q);"
       "float b;"
       "f(z+vec3(0,0,p),b,q);"
       "s=vec3(g-l,a-l,b-l);"
       "n=.5*l*p/length(s);"
       "if(n<d)"
         "return t=m,x=normalize(s),o=r,true;"
       "r+=n;"
     "}"
   "return false;"
 "}"
 "void main()"
 "{"
   "vec2 v=-1.+2.*gl_FragCoord.xy/resolution.xy,c=v*vec2(1.33,1);"
   "vec3 x=vec3(.577,.577,.577),o=vec3(-.707,0,.707);"
   "float y=1.,s=1.4+.2*cos(6.28318*time/20.);"
   "vec3 z=vec3(s*sin(6.28318*time/20.),.3-.4*sin(6.28318*time/20.),s*cos(6.28318*time/20.)),p=vec3(0,.1,0),m=normalize(p-z),t=vec3(0,1,0),r=normalize(cross(m,t)),w=normalize(cross(r,m)),e=normalize(c.x*r+c.y*w+1.5*m),l,i;"
   "vec4 u;"
   "float b;"
   "if(!f(z,e,b,1e20,l,u,y))"
     "i=1.3*vec3(1,.98,.9)*(.7+.3*e.y);"
   "else"
     "{"
       "vec3 n=z+b*e;"
       "float d=clamp(.2+.8*dot(x,l),0.,1.);"
       "d=d*d;"
       "float F=clamp(.3+.7*dot(o,l),0.,1.),a=clamp(1.25*u.w-.4,0.,1.);"
       "a=a*a*.5+.5*a;"
       "float q;"
       "vec3 g;"
       "vec4 C;"
       "if(d>.001)"
         "if(f(n,x,q,1e20,g,C,y))"
           "d=.1;"
       "i=vec3(1,1,1);"
       "i=mix(i,vec3(.8,.6,.2),sqrt(u.x)*1.25);"
       "i=mix(i,vec3(.8,.3,.3),sqrt(u.y)*1.25);"
       "i=mix(i,vec3(.7,.4,.3),sqrt(u.z)*1.25);"
       "i*=(.5+.5*l.y)*vec3(.14,.15,.16)*.8+d*vec3(1,.85,.4)+.5*F*vec3(.08,.1,.14);"
       "i*=vec3(pow(a,.8),pow(a,1.),pow(a,1.1));"
       "i=1.5*(i*.15+.85*sqrt(i));"
     "}"
   "vec2 d=v*.5+.5;"
   "i*=.7+4.8*d.x*d.y*(1.-d.x)*(1.-d.y);"
   "i=clamp(i,0.,1.);"
   "gl_FragColor=vec4(i,1);"
 "}";

#endif // MANDELBULB_EXPECTED_
