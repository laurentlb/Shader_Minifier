// Generated with  (https://github.com/laurentlb/Shader_Minifier/)
#ifndef MANDELBULB_EXPECTED_
# define MANDELBULB_EXPECTED_

const char *mandelbulb_frag =
 "uniform vec2 resolution;"
 "uniform float time;"
 "bool f(vec4 v,vec3 f,vec3 o,out vec2 i)"
 "{"
   "vec3 y=f-v.xyz;"
   "float c=dot(y,o),e=c*c-dot(y,y)+v.w*v.w;"
   "if(e<0.)"
     "return false;"
   "e=sqrt(e);"
   "i.x=-c-e;"
   "i.y=-c+e;"
   "return true;"
 "}"
 "bool f(vec3 v,out float f,out vec4 y)"
 "{"
   "vec4 e=vec4(100);"
   "vec3 i=v;"
   "float o=dot(i,i);"
   "if(o>1e2)"
     "return f=.5*log(o)/pow(8.,0.),y=vec4(1),false;"
   "for(int x=1;x<7;x++)"
     "{"
       "\n#if 0\n"
       "float z=sqrt(dot(i,i)),c=acos(i.y/z),s=atan(i.x,i.z);"
       "z=pow(z,8.);"
       "c*=8.;"
       "s*=8.;"
       "i=v+z*vec3(sin(c)*sin(s),cos(c),sin(c)*cos(s));"
       "\n#else\n"
       "float t=i.x,d=t*t,n=d*d,m=i.y,l=m*m,p=i.z,w=p*p,g=w*w,r=d+w,C=inversesqrt(r*r*r*r*r*r*r),F=n+l*l+g-6.*l*w-6.*d*l+2.*w*d,G=d-l+w;"
       "i.x=v.x+64.*t*m*p*(d-w)*G*(n-6.*d*w+g)*F*C;"
       "i.y=v.y+-16.*l*r*G*G+F*F;"
       "i.z=v.z+-8.*m*G*(n*n-28.*n*d*w+70.*n*g-28.*d*w*g+g*g)*F*C;"
       "\n#endif\n"
       "o=dot(i,i);"
       "e=min(e,vec4(i.xyz*i.xyz,o));"
       "if(o>1e2)"
         "return y=e,f=.5*log(o)/pow(8.,float(x)),false;"
     "}"
   "y=e;"
   "f=0.;"
   "return true;"
 "}"
 "bool f(vec3 v,vec3 o,out float y,out vec3 i,out vec4 c)"
 "{"
   "vec4 e=vec4(0,0,0,1.25);"
   "vec2 s;"
   "if(!f(e,v,o,s))"
     "return false;"
   "if(s.y<.001)"
     "return false;"
   "if(s.x<.001)"
     "s.x=.001;"
   "if(s.y>1e20)"
     "s.y=1e20;"
   "float x;"
   "vec3 z;"
   "float t=1./sqrt(2.);"
   "for(float d=s.x;d<s.y;)"
     "{"
       "vec3 w=v+o*d;"
       "float r=clamp(.001*d*t,1e-6,.005),g=r*.1;"
       "vec4 C;"
       "float l;"
       "if(f(w,l,e))"
         "return y=d,i=normalize(z),c=e,true;"
       "float n;"
       "f(w+vec3(g,0,0),n,C);"
       "float p;"
       "f(w+vec3(0,g,0),p,C);"
       "float m;"
       "f(w+vec3(0,0,g),m,C);"
       "z=vec3(n-l,p-l,m-l);"
       "x=.5*l*g/length(z);"
       "if(x<r)"
         "return c=e,i=normalize(z),y=d,true;"
       "d+=x;"
     "}"
   "return false;"
 "}"
 "void main()"
 "{"
   "vec2 v=-1.+2.*gl_FragCoord.xy/resolution.xy,i=v*vec2(1.33,1);"
   "vec3 y=vec3(.577),o=vec3(-.707,0,.707);"
   "float e=1.4+.2*cos(6.28318*time/20.);"
   "vec3 c=vec3(e*sin(6.28318*time/20.),.3-.4*sin(6.28318*time/20.),e*cos(6.28318*time/20.)),s=normalize(vec3(0,.1,0)-c),d=normalize(cross(s,vec3(0,1,0)));"
   "d=normalize(i.x*d+i.y*normalize(cross(d,s))+1.5*s);"
   "vec3 z;"
   "vec4 w;"
   "if(f(c,d,e,s,w))"
     "{"
       "vec3 x=c+e*d;"
       "float r=clamp(.2+.8*dot(y,s),0.,1.);"
       "r*=r;"
       "float t=clamp(.3+.7*dot(o,s),0.,1.),n=clamp(1.25*w.w-.4,0.,1.);"
       "n=n*n*.5+.5*n;"
       "float p;"
       "vec3 C;"
       "vec4 g;"
       "if(r>.001)"
         "if(f(x,y,p,C,g))"
           "r=.1;"
       "z=vec3(1);"
       "z=mix(z,vec3(.8,.6,.2),sqrt(w.x)*1.25);"
       "z=mix(z,vec3(.8,.3,.3),sqrt(w.y)*1.25);"
       "z=mix(z,vec3(.7,.4,.3),sqrt(w.z)*1.25);"
       "z*=(.5+.5*s.y)*vec3(.14,.15,.16)*.8+r*vec3(1,.85,.4)+.5*t*vec3(.08,.1,.14);"
       "z*=vec3(pow(n,.8),pow(n,1.),pow(n,1.1));"
       "z=1.5*(z*.15+.85*sqrt(z));"
     "}"
   "else"
     " z=1.3*vec3(1,.98,.9)*(.7+.3*d.y);"
   "v=v*.5+.5;"
   "z*=.7+4.8*v.x*v.y*(1.-v.x)*(1.-v.y);"
   "z=clamp(z,0.,1.);"
   "gl_FragColor=vec4(z,1);"
 "}";

#endif // MANDELBULB_EXPECTED_
