// Generated with  (https://github.com/laurentlb/Shader_Minifier/)
#ifndef MANDELBULB_EXPECTED_
# define MANDELBULB_EXPECTED_

const char *mandelbulb_frag =
 "uniform vec2 resolution;"
 "uniform float time;"
 "bool f(vec4 v,vec3 f,vec3 o,out vec2 i)"
 "{"
   "vec3 y=f-v.xyz;"
   "float c=dot(y,o),x=c*c-dot(y,y)+v.w*v.w;"
   "if(x<0.)"
     "return false;"
   "float e=sqrt(x);"
   "i.x=-c-e;"
   "i.y=-c+e;"
   "return true;"
 "}"
 "bool f(vec3 v,out float f,out vec4 o)"
 "{"
   "vec4 i=vec4(100);"
   "vec3 y=v;"
   "float x=dot(y,y);"
   "if(x>1e2)"
     "return f=.5*log(x)/pow(8.,0.),o=vec4(1),false;"
   "for(int c=1;c<7;c++)"
     "{"
       "\n#if 0\n"
       "float z=sqrt(dot(y,y)),s=acos(y.y/z),p=atan(y.x,y.z);"
       "z=pow(z,8.);"
       "s*=8.;"
       "p*=8.;"
       "y=v+z*vec3(sin(s)*sin(p),cos(s),sin(s)*cos(p));"
       "\n#else\n"
       "float t=y.x,d=t*t,n=d*d,m=y.y,e=m*m,a=y.z,w=a*a,l=w*w,g=d+w,r=inversesqrt(g*g*g*g*g*g*g),C=n+e*e+l-6.*e*w-6.*d*e+2.*w*d,F=d-e+w;"
       "y.x=v.x+64.*t*m*a*(d-w)*F*(n-6.*d*w+l)*C*r;"
       "y.y=v.y+-16.*e*g*F*F+C*C;"
       "y.z=v.z+-8.*m*F*(n*n-28.*n*d*w+70.*n*l-28.*d*w*l+l*l)*C*r;"
       "\n#endif\n"
       "x=dot(y,y);"
       "i=min(i,vec4(y.xyz*y.xyz,x));"
       "if(x>1e2)"
         "return o=i,f=.5*log(x)/pow(8.,float(c)),false;"
     "}"
   "o=i;"
   "f=0.;"
   "return true;"
 "}"
 "bool f(vec3 v,vec3 y,out float o,float e,out vec3 x,out vec4 t,float g)"
 "{"
   "vec4 i=vec4(0,0,0,1.25);"
   "vec2 s;"
   "if(!f(i,v,y,s))"
     "return false;"
   "if(s.y<.001)"
     "return false;"
   "if(s.x<.001)"
     "s.x=.001;"
   "if(s.y>e)"
     "s.y=e;"
   "float c;"
   "vec3 z;"
   "vec4 d;"
   "float w=1./sqrt(1.+g*g);"
   "for(float n=s.x;n<s.y;)"
     "{"
       "vec3 p=v+y*n;"
       "float m=clamp(.001*n*w,1e-6,.005),l=m*.1;"
       "vec4 r;"
       "float C;"
       "if(f(p,C,d))"
         "return o=n,x=normalize(z),t=d,true;"
       "float a;"
       "f(p+vec3(l,0,0),a,r);"
       "float F;"
       "f(p+vec3(0,l,0),F,r);"
       "float E;"
       "f(p+vec3(0,0,l),E,r);"
       "z=vec3(a-C,F-C,E-C);"
       "c=.5*C*l/length(z);"
       "if(c<m)"
         "return t=d,x=normalize(z),o=n,true;"
       "n+=c;"
     "}"
   "return false;"
 "}"
 "void main()"
 "{"
   "vec2 v=-1.+2.*gl_FragCoord.xy/resolution.xy,y=v*vec2(1.33,1);"
   "vec3 x=vec3(.577),o=vec3(-.707,0,.707);"
   "float s=1.4+.2*cos(6.28318*time/20.);"
   "vec3 c=vec3(s*sin(6.28318*time/20.),.3-.4*sin(6.28318*time/20.),s*cos(6.28318*time/20.)),d=normalize(vec3(0,.1,0)-c),l=normalize(cross(d,vec3(0,1,0))),e=normalize(y.x*l+y.y*normalize(cross(l,d))+1.5*d),g,i;"
   "vec4 t;"
   "float C;"
   "if(f(c,e,C,1e20,g,t,1.))"
     "{"
       "vec3 z=c+C*e;"
       "float n=clamp(.2+.8*dot(x,g),0.,1.);"
       "n*=n;"
       "float w=clamp(.3+.7*dot(o,g),0.,1.),m=clamp(1.25*t.w-.4,0.,1.);"
       "m=m*m*.5+.5*m;"
       "float r;"
       "vec3 F;"
       "vec4 a;"
       "if(n>.001)"
         "if(f(z,x,r,1e20,F,a,1.))"
           "n=.1;"
       "i=vec3(1);"
       "i=mix(i,vec3(.8,.6,.2),sqrt(t.x)*1.25);"
       "i=mix(i,vec3(.8,.3,.3),sqrt(t.y)*1.25);"
       "i=mix(i,vec3(.7,.4,.3),sqrt(t.z)*1.25);"
       "i*=(.5+.5*g.y)*vec3(.14,.15,.16)*.8+n*vec3(1,.85,.4)+.5*w*vec3(.08,.1,.14);"
       "i*=vec3(pow(m,.8),pow(m,1.),pow(m,1.1));"
       "i=1.5*(i*.15+.85*sqrt(i));"
     "}"
   "else"
     " i=1.3*vec3(1,.98,.9)*(.7+.3*e.y);"
   "vec2 w=v*.5+.5;"
   "i*=.7+4.8*w.x*w.y*(1.-w.x)*(1.-w.y);"
   "i=clamp(i,0.,1.);"
   "gl_FragColor=vec4(i,1);"
 "}";

#endif // MANDELBULB_EXPECTED_
