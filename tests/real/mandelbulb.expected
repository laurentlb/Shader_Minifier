/* File generated with 
 * http://www.ctrl-alt-test.fr
 */
#ifndef MANDELBULB_EXPECTED_
# define MANDELBULB_EXPECTED_

const char *mandelbulb_frag =
 "uniform vec2 resolution;"
 "uniform float time;"
 "bool t(vec4 v,vec3 f,vec3 t,out vec2 i)"
 "{"
   "vec3 y=f-v.xyz;"
   "float c=dot(y,t),e=dot(y,y)-v.w*v.w,o=c*c-e;"
   "if(o<0.)"
     "return false;"
   "float x=sqrt(o);"
   "i.x=-c-x;"
   "i.y=-c+x;"
   "return true;"
 "}"
 "bool t(vec3 v,out float f,out vec4 y)"
 "{"
   "vec4 i=vec4(100);"
   "vec3 c=v;"
   "float o=dot(c,c);"
   "if(o>1e2)"
     "return f=.5*log(o)/pow(8.,0.),y=vec4(1),false;"
   "for(int x=1;x<7;x++)"
     "{"
       "\n#if 0\n"
       "float t=sqrt(dot(c,c)),s=acos(c.y/t),z=atan(c.x,c.z);"
       "t=pow(t,8.);"
       "s*=8.;"
       "z*=8.;"
       "c=v+t*vec3(sin(s)*sin(z),cos(s),sin(s)*cos(z));"
       "\n#else\n"
       "float n=c.x,d=n*n,m=d*d,p=c.y,e=p*p,l=c.z,w=l*l,r=w*w,g=d+w,a=inversesqrt(g*g*g*g*g*g*g),u=m+e*e+r-6.*e*w-6.*d*e+2.*w*d,q=d-e+w;"
       "c.x=v.x+64.*n*p*l*(d-w)*q*(m-6.*d*w+r)*u*a;"
       "c.y=v.y+-16.*e*g*q*q+u*u;"
       "c.z=v.z+-8.*p*q*(m*m-28.*m*d*w+70.*m*r-28.*d*w*r+r*r)*u*a;"
       "\n#endif\n"
       "o=dot(c,c);"
       "i=min(i,vec4(c.xyz*c.xyz,o));"
       "if(o>1e2)"
         "return y=i,f=.5*log(o)/pow(8.,float(x)),false;"
     "}"
   "y=i;"
   "f=0.;"
   "return true;"
 "}"
 "bool t(vec3 v,vec3 f,out float y,float c,out vec3 o,out vec4 x,float g)"
 "{"
   "vec4 i=vec4(0,0,0,1.25);"
   "vec2 e;"
   "if(!t(i,v,f,e))"
     "return false;"
   "if(e.y<.001)"
     "return false;"
   "if(e.x<.001)"
     "e.x=.001;"
   "if(e.y>c)"
     "e.y=c;"
   "float n;"
   "vec3 z;"
   "vec4 s;"
   "float d=1./sqrt(1.+g*g);"
   "for(float w=e.x;w<e.y;)"
     "{"
       "vec3 m=v+f*w;"
       "float r=clamp(.001*w*d,1e-6,.005),p=r*.1;"
       "vec4 a;"
       "float l;"
       "if(t(m,l,s))"
         "return y=w,o=normalize(z),x=s,true;"
       "float u;"
       "t(m+vec3(p,0,0),u,a);"
       "float q;"
       "t(m+vec3(0,p,0),q,a);"
       "float b;"
       "t(m+vec3(0,0,p),b,a);"
       "z=vec3(u-l,q-l,b-l);"
       "n=.5*l*p/length(z);"
       "if(n<r)"
         "return x=s,o=normalize(z),y=w,true;"
       "w+=n;"
     "}"
   "return false;"
 "}"
 "void main()"
 "{"
   "vec2 v=-1.+2.*gl_FragCoord.xy/resolution.xy,c=v*vec2(1.33,1);"
   "vec3 f=vec3(.577),o=vec3(-.707,0,.707);"
   "float y=1.,p=1.4+.2*cos(6.28318*time/20.);"
   "vec3 x=vec3(p*sin(6.28318*time/20.),.3-.4*sin(6.28318*time/20.),p*cos(6.28318*time/20.)),s=vec3(0,.1,0),z=normalize(s-x),a=vec3(0,1,0),w=normalize(cross(z,a)),d=normalize(cross(w,z)),e=normalize(c.x*w+c.y*d+1.5*z),g,i;"
   "vec4 l;"
   "float u;"
   "if(!t(x,e,u,1e20,g,l,y))"
     "i=1.3*vec3(1,.98,.9)*(.7+.3*e.y);"
   "else"
     "{"
       "vec3 m=x+u*e;"
       "float r=clamp(.2+.8*dot(f,g),0.,1.);"
       "r*=r;"
       "float q=clamp(.3+.7*dot(o,g),0.,1.),n=clamp(1.25*l.w-.4,0.,1.);"
       "n=n*n*.5+.5*n;"
       "float b;"
       "vec3 F;"
       "vec4 C;"
       "if(r>.001)"
         "if(t(m,f,b,1e20,F,C,y))"
           "r=.1;"
       "i=vec3(1);"
       "i=mix(i,vec3(.8,.6,.2),sqrt(l.x)*1.25);"
       "i=mix(i,vec3(.8,.3,.3),sqrt(l.y)*1.25);"
       "i=mix(i,vec3(.7,.4,.3),sqrt(l.z)*1.25);"
       "i*=(.5+.5*g.y)*vec3(.14,.15,.16)*.8+r*vec3(1,.85,.4)+.5*q*vec3(.08,.1,.14);"
       "i*=vec3(pow(n,.8),pow(n,1.),pow(n,1.1));"
       "i=1.5*(i*.15+.85*sqrt(i));"
     "}"
   "vec2 r=v*.5+.5;"
   "i*=.7+4.8*r.x*r.y*(1.-r.x)*(1.-r.y);"
   "i=clamp(i,0.,1.);"
   "gl_FragColor=vec4(i,1);"
 "}";

#endif // MANDELBULB_EXPECTED_
