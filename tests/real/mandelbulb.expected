/* File generated with 
 * http://www.ctrl-alt-test.fr
 */
#ifndef MANDELBULB_EXPECTED_
# define MANDELBULB_EXPECTED_

const char *mandelbulb_frag =
 "uniform vec2 resolution;"
 "uniform float time;"
 "bool t(vec4 v,vec3 f,vec3 t,out vec2 i)"
 "{"
   "vec3 y=f-v.xyz;"
   "float c=dot(y,t),e=dot(y,y)-v.w*v.w,o=c*c-e;"
   "if(o<0.)"
     "return false;"
   "float x=sqrt(o);"
   "i.x=-c-x;"
   "i.y=-c+x;"
   "return true;"
 "}"
 "bool t(vec3 v,out float f,out vec4 y)"
 "{"
   "vec4 i=vec4(100);"
   "vec3 c=v;"
   "float o=dot(c,c);"
   "if(o>100.)"
     "return f=.5*log(o)/pow(8.,0.),y=vec4(1),false;"
   "for(int x=1;x<7;x++)"
     "{"
       "\n#if 0\n"
       "float t=sqrt(dot(c,c)),s=acos(c.y/t),n=atan(c.x,c.z);"
       "t=pow(t,8.);"
       "s=s*8.;"
       "n=n*8.;"
       "c=v+t*vec3(sin(s)*sin(n),cos(s),sin(s)*cos(n));"
       "\n#else\n"
       "float d=c.x,z=d*d,m=z*z,p=c.y,e=p*p,l=c.z,w=l*l,r=w*w,g=z+w,a=inversesqrt(g*g*g*g*g*g*g),u=m+e*e+r-6.*e*w-6.*z*e+2.*w*z,q=z-e+w;"
       "c.x=v.x+64.*d*p*l*(z-w)*q*(m-6.*z*w+r)*u*a;"
       "c.y=v.y+-16.*e*g*q*q+u*u;"
       "c.z=v.z+-8.*p*q*(m*m-28.*m*z*w+70.*m*r-28.*z*w*r+r*r)*u*a;"
       "\n#endif\n"
       "o=dot(c,c);"
       "i=min(i,vec4(c.xyz*c.xyz,o));"
       "if(o>100.)"
         "return y=i,f=.5*log(o)/pow(8.,float(x)),false;"
     "}"
   "y=i;"
   "f=0.;"
   "return true;"
 "}"
 "bool t(vec3 v,vec3 f,out float y,float c,out vec3 o,out vec4 x,float g)"
 "{"
   "vec4 i=vec4(0,0,0,1.25);"
   "vec2 s;"
   "if(!t(i,v,f,s))"
     "return false;"
   "if(s.y<.001)"
     "return false;"
   "if(s.x<.001)"
     "s.x=.001;"
   "if(s.y>c)"
     "s.y=c;"
   "float e;"
   "vec3 n;"
   "vec4 z;"
   "float w=1./sqrt(1.+g*g);"
   "for(float m=s.x;m<s.y;)"
     "{"
       "vec3 r=v+f*m;"
       "float d=clamp(.001*m*w,1e-6,.005),p=d*.1;"
       "vec4 a;"
       "float l;"
       "if(t(r,l,z))"
         "return y=m,o=normalize(n),x=z,true;"
       "float u;"
       "t(r+vec3(p,0,0),u,a);"
       "float q;"
       "t(r+vec3(0,p,0),q,a);"
       "float b;"
       "t(r+vec3(0,0,p),b,a);"
       "n=vec3(u-l,q-l,b-l);"
       "e=.5*l*p/length(n);"
       "if(e<d)"
         "return x=z,o=normalize(n),y=m,true;"
       "m+=e;"
     "}"
   "return false;"
 "}"
 "void main()"
 "{"
   "vec2 v=-1.+2.*gl_FragCoord.xy/resolution.xy,c=v*vec2(1.33,1);"
   "vec3 f=vec3(.577),o=vec3(-.707,0,.707);"
   "float y=1.,s=1.4+.2*cos(6.28318*time/20.);"
   "vec3 n=vec3(s*sin(6.28318*time/20.),.3-.4*sin(6.28318*time/20.),s*cos(6.28318*time/20.)),r=vec3(0,.1,0),z=normalize(r-n),x=vec3(0,1,0),p=normalize(cross(z,x)),e=normalize(cross(p,z)),w=normalize(c.x*p+c.y*e+1.5*z),g,i;"
   "vec4 l;"
   "float u;"
   "if(!t(n,w,u,1e20,g,l,y))"
     "i=1.3*vec3(1,.98,.9)*(.7+.3*w.y);"
   "else"
     "{"
       "vec3 m=n+u*w;"
       "float d=clamp(.2+.8*dot(f,g),0.,1.);"
       "d=d*d;"
       "float q=clamp(.3+.7*dot(o,g),0.,1.),a=clamp(1.25*l.w-.4,0.,1.);"
       "a=a*a*.5+.5*a;"
       "float b;"
       "vec3 F;"
       "vec4 C;"
       "if(d>.001)"
         "if(t(m,f,b,1e20,F,C,y))"
           "d=.1;"
       "i=vec3(1);"
       "i=mix(i,vec3(.8,.6,.2),sqrt(l.x)*1.25);"
       "i=mix(i,vec3(.8,.3,.3),sqrt(l.y)*1.25);"
       "i=mix(i,vec3(.7,.4,.3),sqrt(l.z)*1.25);"
       "i*=(.5+.5*g.y)*vec3(.14,.15,.16)*.8+d*vec3(1,.85,.4)+.5*q*vec3(.08,.1,.14);"
       "i*=vec3(pow(a,.8),pow(a,1.),pow(a,1.1));"
       "i=1.5*(i*.15+.85*sqrt(i));"
     "}"
   "vec2 d=v*.5+.5;"
   "i*=.7+4.8*d.x*d.y*(1.-d.x)*(1.-d.y);"
   "i=clamp(i,0.,1.);"
   "gl_FragColor=vec4(i,1);"
 "}";

#endif // MANDELBULB_EXPECTED_
