/* File generated with 
 * http://www.ctrl-alt-test.fr
 */
#ifndef SULT_EXPECTED_
# define SULT_EXPECTED_
# define VAR_resolution "r"
# define VAR_time "m"

const char *sult_frag =
 "float y=5.,z=.9,x=0.,a=90.,s=0.;"
 "vec3 v=vec3(1),n=vec3(0,0,1),f=vec3(0,0,1.5);"
 "uniform vec2 r;"
 "uniform float m;"
 "vec3 rotatey(vec3 v,float y)"
 "{"
   "return vec3(v.x*cos(y)+v.z*sin(y),v.y,v.z*cos(y)-v.x*sin(y));"
 "}"
 "float c=0.,w=10.;"
 "float e(vec3 v)"
 "{"
   "float z=m,w,a=0.,g,o,f;"
   "vec3 r;"
   "v+=(sin(v.zxy*1.7+z)+sin(v.yzx+z*3.))*.2;"
   "if(y<6.)"
     "a=length(v.xyz*vec3(1,1,.1)-vec3(0,-.1,z*.15-.3))-.34;"
   "else"
     " a=length(v.xy+vec2(0,.7))-.3+(sin(v.z*17.+z*.6)+sin(v.z*2.)*6.)*.01;"
   "v.xy=vec2(atan(v.x,v.y)*1.113,1.6-length(v.xy)-sin(z*2.)*.3);"
   "r=fract(v.xzz+.5).xyz-.5;"
   "r.y=(v.y-.35)*1.3;"
   "w=max(abs(v.y-.3)-.05,abs(length(fract(v.xz)-.5)-.4)-.03);"
   "c=step(a,w);"
   "return min(min(w,a),v.y-.2);"
 "}"
 "vec3 d=vec3(.19,.2,.24),o=vec3(1),l=vec3(.45,.01,0),g=vec3(.17,0,0);"
 "void main()"
 "{"
   "vec2 t=-1.+2.*gl_FragCoord.xy/r.xy;"
   "vec3 i=normalize(rotatey(rotatey(vec3(t.y*z,t.x*z*1.33,1),-x*.035).yxz,(a+s*m)*.035)),p=n+f*m,u,h,F;"
   "float C=1.,b=0.,Z,Y,X=0.,W,V,U,T;"
   "u=vec3(.01,0,0);"
   "h=u.yyy;"
   "while(C>.1)"
     "{"
       "for(Z=X,Y=1.;Z<w&&Y>.005;Z+=Y)"
         "Y=e(p+i*Z);"
       "if(Z<w)"
         "p+=i*Z,W=e(p),U=c,F=normalize(-vec3(W-e(p+u.xyy),W-e(p+u.yxy),W-e(p+u.yyx))),V=clamp(e(p+F*.05)*4.+e(p+F*.1)*2.+.5,.1,1.),b=U*.3,F=normalize(F+step(4.,y)*c*sin(p.yzx*40.)*.05),i=reflect(i,F),T=clamp(dot(normalize(v),F),0.,1.),F=mix(mix(d,o,T),l*(T+.2),U)+vec3(.7*pow(clamp(dot(normalize(v),i),0.,1.),12.)),h+=C*mix(F*V,g,Z/w),C*=b*(1.-Z/w),X=.1;"
       "else"
         " h+=C*g,C=0.;"
     "}"
   "gl_FragColor.xyz=h;"
   "gl_FragColor.w=1.;"
 "}";

#endif // SULT_EXPECTED_
